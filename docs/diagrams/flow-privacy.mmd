sequenceDiagram
    participant User
    participant API as /api/avatar/[userId]
    participant DB as PostgreSQL
    participant Logic as Privacy Logic

    User->>API: GET /api/avatar/123
    API->>DB: Fetch User + UserSettings
    DB-->>API: User Data
    
    API->>Logic: Check Privacy
    Logic->>Logic: is settings.profileVisibility == 'public'?
    
    alt Public
        Logic-->>API: Allow
        API-->>User: Return Avatar URL
    else Private
        Logic-->>API: Deny
        API-->>User: 404 Not Found (Mask existence)
    end
