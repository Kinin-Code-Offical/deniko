"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@upstash+core-analytics@0.0.10";
exports.ids = ["vendor-chunks/@upstash+core-analytics@0.0.10"];
exports.modules = {

/***/ "(action-browser)/../../node_modules/.pnpm/@upstash+core-analytics@0.0.10/node_modules/@upstash/core-analytics/dist/index.js":
/*!******************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@upstash+core-analytics@0.0.10/node_modules/@upstash/core-analytics/dist/index.js ***!
  \******************************************************************************************************************/
/***/ ((module) => {

eval("var g=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var w=(l,e)=>{for(var t in e)g(l,t,{get:e[t],enumerable:!0})},A=(l,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of _(e))!y.call(l,s)&&s!==t&&g(l,s,{get:()=>e[s],enumerable:!(i=k(e,s))||i.enumerable});return l};var x=l=>A(g({},\"__esModule\",{value:!0}),l);var S={};w(S,{Analytics:()=>b});module.exports=x(S);var p=`\nlocal key = KEYS[1]\nlocal field = ARGV[1]\n\nlocal data = redis.call(\"ZRANGE\", key, 0, -1, \"WITHSCORES\")\nlocal count = {}\n\nfor i = 1, #data, 2 do\n  local json_str = data[i]\n  local score = tonumber(data[i + 1])\n  local obj = cjson.decode(json_str)\n\n  local fieldValue = obj[field]\n\n  if count[fieldValue] == nil then\n    count[fieldValue] = score\n  else\n    count[fieldValue] = count[fieldValue] + score\n  end\nend\n\nlocal result = {}\nfor k, v in pairs(count) do\n  table.insert(result, {k, v})\nend\n\nreturn result\n`,f=`\nlocal prefix = KEYS[1]\nlocal first_timestamp = tonumber(ARGV[1]) -- First timestamp to check\nlocal increment = tonumber(ARGV[2])       -- Increment between each timestamp\nlocal num_timestamps = tonumber(ARGV[3])  -- Number of timestampts to check (24 for a day and 24 * 7 for a week)\nlocal num_elements = tonumber(ARGV[4])    -- Number of elements to fetch in each category\nlocal check_at_most = tonumber(ARGV[5])   -- Number of elements to check at most.\n\nlocal keys = {}\nfor i = 1, num_timestamps do\n  local timestamp = first_timestamp - (i - 1) * increment\n  table.insert(keys, prefix .. \":\" .. timestamp)\nend\n\n-- get the union of the groups\nlocal zunion_params = {\"ZUNION\", num_timestamps, unpack(keys)}\ntable.insert(zunion_params, \"WITHSCORES\")\nlocal result = redis.call(unpack(zunion_params))\n\n-- select num_elements many items\nlocal true_group = {}\nlocal false_group = {}\nlocal denied_group = {}\nlocal true_count = 0\nlocal false_count = 0\nlocal denied_count = 0\nlocal i = #result - 1\n\n-- index to stop at after going through \"checkAtMost\" many items:\nlocal cutoff_index = #result - 2 * check_at_most\n\n-- iterate over the results\nwhile (true_count + false_count + denied_count) < (num_elements * 3) and 1 <= i and i >= cutoff_index do\n  local score = tonumber(result[i + 1])\n  if score > 0 then\n    local element = result[i]\n    if string.find(element, \"success\\\\\":true\") and true_count < num_elements then\n      table.insert(true_group, {score, element})\n      true_count = true_count + 1\n    elseif string.find(element, \"success\\\\\":false\") and false_count < num_elements then\n      table.insert(false_group, {score, element})\n      false_count = false_count + 1\n    elseif string.find(element, \"success\\\\\":\\\\\"denied\") and denied_count < num_elements then\n      table.insert(denied_group, {score, element})\n      denied_count = denied_count + 1\n    end\n  end\n  i = i - 2\nend\n\nreturn {true_group, false_group, denied_group}\n`,h=`\nlocal prefix = KEYS[1]\nlocal first_timestamp = tonumber(ARGV[1])\nlocal increment = tonumber(ARGV[2])\nlocal num_timestamps = tonumber(ARGV[3])\n\nlocal keys = {}\nfor i = 1, num_timestamps do\n  local timestamp = first_timestamp - (i - 1) * increment\n  table.insert(keys, prefix .. \":\" .. timestamp)\nend\n\n-- get the union of the groups\nlocal zunion_params = {\"ZUNION\", num_timestamps, unpack(keys)}\ntable.insert(zunion_params, \"WITHSCORES\")\nlocal result = redis.call(unpack(zunion_params))\n\nreturn result\n`;var b=class{redis;prefix;bucketSize;constructor(e){this.redis=e.redis,this.prefix=e.prefix??\"@upstash/analytics\",this.bucketSize=this.parseWindow(e.window)}validateTableName(e){if(!/^[a-zA-Z0-9_-]+$/.test(e))throw new Error(`Invalid table name: ${e}. Table names can only contain letters, numbers, dashes and underscores.`)}parseWindow(e){if(typeof e==\"number\"){if(e<=0)throw new Error(`Invalid window: ${e}`);return e}let t=/^(\\d+)([smhd])$/;if(!t.test(e))throw new Error(`Invalid window: ${e}`);let[,i,s]=e.match(t),n=parseInt(i);switch(s){case\"s\":return n*1e3;case\"m\":return n*1e3*60;case\"h\":return n*1e3*60*60;case\"d\":return n*1e3*60*60*24;default:throw new Error(`Invalid window unit: ${s}`)}}getBucket(e){let t=e??Date.now();return Math.floor(t/this.bucketSize)*this.bucketSize}async ingest(e,...t){this.validateTableName(e),await Promise.all(t.map(async i=>{let s=this.getBucket(i.time),n=[this.prefix,e,s].join(\":\");await this.redis.zincrby(n,1,JSON.stringify({...i,time:void 0}))}))}formatBucketAggregate(e,t,i){let s={};return e.forEach(([n,r])=>{t==\"success\"&&(n=n===1?\"true\":n===null?\"false\":n),s[t]=s[t]||{},s[t][(n??\"null\").toString()]=r}),{time:i,...s}}async aggregateBucket(e,t,i){this.validateTableName(e);let s=this.getBucket(i),n=[this.prefix,e,s].join(\":\"),r=await this.redis.eval(p,[n],[t]);return this.formatBucketAggregate(r,t,s)}async aggregateBuckets(e,t,i,s){this.validateTableName(e);let n=this.getBucket(s),r=[];for(let o=0;o<i;o+=1)r.push(this.aggregateBucket(e,t,n)),n=n-this.bucketSize;return Promise.all(r)}async aggregateBucketsWithPipeline(e,t,i,s,n){this.validateTableName(e),n=n??48;let r=this.getBucket(s),o=[],c=this.redis.pipeline(),u=[];for(let a=1;a<=i;a+=1){let d=[this.prefix,e,r].join(\":\");c.eval(p,[d],[t]),o.push(r),r=r-this.bucketSize,(a%n==0||a==i)&&(u.push(c.exec()),c=this.redis.pipeline())}return(await Promise.all(u)).flat().map((a,d)=>this.formatBucketAggregate(a,t,o[d]))}async getAllowedBlocked(e,t,i){this.validateTableName(e);let s=[this.prefix,e].join(\":\"),n=this.getBucket(i),r=await this.redis.eval(h,[s],[n,this.bucketSize,t]),o={};for(let c=0;c<r.length;c+=2){let u=r[c],m=u.identifier,a=+r[c+1];o[m]||(o[m]={success:0,blocked:0}),o[m][u.success?\"success\":\"blocked\"]=a}return o}async getMostAllowedBlocked(e,t,i,s,n){this.validateTableName(e);let r=[this.prefix,e].join(\":\"),o=this.getBucket(s),c=n??i*5,[u,m,a]=await this.redis.eval(f,[r],[o,this.bucketSize,t,i,c]);return{allowed:this.toDicts(u),ratelimited:this.toDicts(m),denied:this.toDicts(a)}}toDicts(e){let t=[];for(let i=0;i<e.length;i+=1){let s=+e[i][0],n=e[i][1];t.push({identifier:n.identifier,count:s})}return t}};0&&(0);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHVwc3Rhc2grY29yZS1hbmFseXRpY3NAMC4wLjEwL25vZGVfbW9kdWxlcy9AdXBzdGFzaC9jb3JlLWFuYWx5dGljcy9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhLDRCQUE0QixzQ0FBc0MsaUNBQWlDLHNDQUFzQyxjQUFjLHNCQUFzQix1QkFBdUIsRUFBRSxlQUFlLDZGQUE2RixrREFBa0QsRUFBRSxVQUFVLGVBQWUsZUFBZSxTQUFTLEtBQUssU0FBUyxLQUFLLGdCQUFnQixFQUFFLG9CQUFvQjtBQUM3ZDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsS0FBSztBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGVBQWU7QUFDL0M7QUFDQTtBQUNBLGlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQSxrQ0FBa0MsZUFBZTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQTtBQUNBLEVBQUUsWUFBWSxNQUFNLE9BQU8sV0FBVyxlQUFlLHlHQUF5RyxxQkFBcUIsc0VBQXNFLEVBQUUsMkVBQTJFLGVBQWUsdUJBQXVCLDJDQUEyQyxFQUFFLEdBQUcsU0FBUyx3QkFBd0IsaURBQWlELEVBQUUsR0FBRyxtQ0FBbUMsVUFBVSxxQkFBcUIsd0JBQXdCLDJCQUEyQiw4QkFBOEIsZ0RBQWdELEVBQUUsSUFBSSxhQUFhLG9CQUFvQixxREFBcUQscUJBQXFCLDREQUE0RCwyREFBMkQsNkNBQTZDLGlCQUFpQixHQUFHLEdBQUcsNkJBQTZCLFNBQVMsMkJBQTJCLCtEQUErRCxnQ0FBZ0MsR0FBRyxhQUFhLDZCQUE2QiwwQkFBMEIseUZBQXlGLHlDQUF5QyxnQ0FBZ0MsMEJBQTBCLDZCQUE2QixZQUFZLElBQUksNkRBQTZELHNCQUFzQiw4Q0FBOEMsa0NBQWtDLDBEQUEwRCxZQUFZLEtBQUssTUFBTSxrQ0FBa0MsMkdBQTJHLHFGQUFxRiwrQkFBK0IsMEJBQTBCLDhHQUE4RyxZQUFZLFdBQVcsTUFBTSxvQ0FBb0MsYUFBYSxvQkFBb0Isd0NBQXdDLFNBQVMsdUNBQXVDLDBCQUEwQiw0SEFBNEgsT0FBTyw0RUFBNEUsV0FBVyxTQUFTLFlBQVksV0FBVyxNQUFNLHlCQUF5QixRQUFRLGdDQUFnQyxFQUFFLFdBQVcsSUFBSSxDQUEwQiIsInNvdXJjZXMiOlsiQzpcXEJBU0VcXERFTklLTy1QUk9KRUNUXFxkZW5pa29cXG5vZGVfbW9kdWxlc1xcLnBucG1cXEB1cHN0YXNoK2NvcmUtYW5hbHl0aWNzQDAuMC4xMFxcbm9kZV9tb2R1bGVzXFxAdXBzdGFzaFxcY29yZS1hbmFseXRpY3NcXGRpc3RcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO3ZhciBnPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgaz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3ZhciBfPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO3ZhciB5PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIHc9KGwsZSk9Pntmb3IodmFyIHQgaW4gZSlnKGwsdCx7Z2V0OmVbdF0sZW51bWVyYWJsZTohMH0pfSxBPShsLGUsdCxpKT0+e2lmKGUmJnR5cGVvZiBlPT1cIm9iamVjdFwifHx0eXBlb2YgZT09XCJmdW5jdGlvblwiKWZvcihsZXQgcyBvZiBfKGUpKSF5LmNhbGwobCxzKSYmcyE9PXQmJmcobCxzLHtnZXQ6KCk9PmVbc10sZW51bWVyYWJsZTohKGk9ayhlLHMpKXx8aS5lbnVtZXJhYmxlfSk7cmV0dXJuIGx9O3ZhciB4PWw9PkEoZyh7fSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxsKTt2YXIgUz17fTt3KFMse0FuYWx5dGljczooKT0+Yn0pO21vZHVsZS5leHBvcnRzPXgoUyk7dmFyIHA9YFxubG9jYWwga2V5ID0gS0VZU1sxXVxubG9jYWwgZmllbGQgPSBBUkdWWzFdXG5cbmxvY2FsIGRhdGEgPSByZWRpcy5jYWxsKFwiWlJBTkdFXCIsIGtleSwgMCwgLTEsIFwiV0lUSFNDT1JFU1wiKVxubG9jYWwgY291bnQgPSB7fVxuXG5mb3IgaSA9IDEsICNkYXRhLCAyIGRvXG4gIGxvY2FsIGpzb25fc3RyID0gZGF0YVtpXVxuICBsb2NhbCBzY29yZSA9IHRvbnVtYmVyKGRhdGFbaSArIDFdKVxuICBsb2NhbCBvYmogPSBjanNvbi5kZWNvZGUoanNvbl9zdHIpXG5cbiAgbG9jYWwgZmllbGRWYWx1ZSA9IG9ialtmaWVsZF1cblxuICBpZiBjb3VudFtmaWVsZFZhbHVlXSA9PSBuaWwgdGhlblxuICAgIGNvdW50W2ZpZWxkVmFsdWVdID0gc2NvcmVcbiAgZWxzZVxuICAgIGNvdW50W2ZpZWxkVmFsdWVdID0gY291bnRbZmllbGRWYWx1ZV0gKyBzY29yZVxuICBlbmRcbmVuZFxuXG5sb2NhbCByZXN1bHQgPSB7fVxuZm9yIGssIHYgaW4gcGFpcnMoY291bnQpIGRvXG4gIHRhYmxlLmluc2VydChyZXN1bHQsIHtrLCB2fSlcbmVuZFxuXG5yZXR1cm4gcmVzdWx0XG5gLGY9YFxubG9jYWwgcHJlZml4ID0gS0VZU1sxXVxubG9jYWwgZmlyc3RfdGltZXN0YW1wID0gdG9udW1iZXIoQVJHVlsxXSkgLS0gRmlyc3QgdGltZXN0YW1wIHRvIGNoZWNrXG5sb2NhbCBpbmNyZW1lbnQgPSB0b251bWJlcihBUkdWWzJdKSAgICAgICAtLSBJbmNyZW1lbnQgYmV0d2VlbiBlYWNoIHRpbWVzdGFtcFxubG9jYWwgbnVtX3RpbWVzdGFtcHMgPSB0b251bWJlcihBUkdWWzNdKSAgLS0gTnVtYmVyIG9mIHRpbWVzdGFtcHRzIHRvIGNoZWNrICgyNCBmb3IgYSBkYXkgYW5kIDI0ICogNyBmb3IgYSB3ZWVrKVxubG9jYWwgbnVtX2VsZW1lbnRzID0gdG9udW1iZXIoQVJHVls0XSkgICAgLS0gTnVtYmVyIG9mIGVsZW1lbnRzIHRvIGZldGNoIGluIGVhY2ggY2F0ZWdvcnlcbmxvY2FsIGNoZWNrX2F0X21vc3QgPSB0b251bWJlcihBUkdWWzVdKSAgIC0tIE51bWJlciBvZiBlbGVtZW50cyB0byBjaGVjayBhdCBtb3N0LlxuXG5sb2NhbCBrZXlzID0ge31cbmZvciBpID0gMSwgbnVtX3RpbWVzdGFtcHMgZG9cbiAgbG9jYWwgdGltZXN0YW1wID0gZmlyc3RfdGltZXN0YW1wIC0gKGkgLSAxKSAqIGluY3JlbWVudFxuICB0YWJsZS5pbnNlcnQoa2V5cywgcHJlZml4IC4uIFwiOlwiIC4uIHRpbWVzdGFtcClcbmVuZFxuXG4tLSBnZXQgdGhlIHVuaW9uIG9mIHRoZSBncm91cHNcbmxvY2FsIHp1bmlvbl9wYXJhbXMgPSB7XCJaVU5JT05cIiwgbnVtX3RpbWVzdGFtcHMsIHVucGFjayhrZXlzKX1cbnRhYmxlLmluc2VydCh6dW5pb25fcGFyYW1zLCBcIldJVEhTQ09SRVNcIilcbmxvY2FsIHJlc3VsdCA9IHJlZGlzLmNhbGwodW5wYWNrKHp1bmlvbl9wYXJhbXMpKVxuXG4tLSBzZWxlY3QgbnVtX2VsZW1lbnRzIG1hbnkgaXRlbXNcbmxvY2FsIHRydWVfZ3JvdXAgPSB7fVxubG9jYWwgZmFsc2VfZ3JvdXAgPSB7fVxubG9jYWwgZGVuaWVkX2dyb3VwID0ge31cbmxvY2FsIHRydWVfY291bnQgPSAwXG5sb2NhbCBmYWxzZV9jb3VudCA9IDBcbmxvY2FsIGRlbmllZF9jb3VudCA9IDBcbmxvY2FsIGkgPSAjcmVzdWx0IC0gMVxuXG4tLSBpbmRleCB0byBzdG9wIGF0IGFmdGVyIGdvaW5nIHRocm91Z2ggXCJjaGVja0F0TW9zdFwiIG1hbnkgaXRlbXM6XG5sb2NhbCBjdXRvZmZfaW5kZXggPSAjcmVzdWx0IC0gMiAqIGNoZWNrX2F0X21vc3RcblxuLS0gaXRlcmF0ZSBvdmVyIHRoZSByZXN1bHRzXG53aGlsZSAodHJ1ZV9jb3VudCArIGZhbHNlX2NvdW50ICsgZGVuaWVkX2NvdW50KSA8IChudW1fZWxlbWVudHMgKiAzKSBhbmQgMSA8PSBpIGFuZCBpID49IGN1dG9mZl9pbmRleCBkb1xuICBsb2NhbCBzY29yZSA9IHRvbnVtYmVyKHJlc3VsdFtpICsgMV0pXG4gIGlmIHNjb3JlID4gMCB0aGVuXG4gICAgbG9jYWwgZWxlbWVudCA9IHJlc3VsdFtpXVxuICAgIGlmIHN0cmluZy5maW5kKGVsZW1lbnQsIFwic3VjY2Vzc1xcXFxcIjp0cnVlXCIpIGFuZCB0cnVlX2NvdW50IDwgbnVtX2VsZW1lbnRzIHRoZW5cbiAgICAgIHRhYmxlLmluc2VydCh0cnVlX2dyb3VwLCB7c2NvcmUsIGVsZW1lbnR9KVxuICAgICAgdHJ1ZV9jb3VudCA9IHRydWVfY291bnQgKyAxXG4gICAgZWxzZWlmIHN0cmluZy5maW5kKGVsZW1lbnQsIFwic3VjY2Vzc1xcXFxcIjpmYWxzZVwiKSBhbmQgZmFsc2VfY291bnQgPCBudW1fZWxlbWVudHMgdGhlblxuICAgICAgdGFibGUuaW5zZXJ0KGZhbHNlX2dyb3VwLCB7c2NvcmUsIGVsZW1lbnR9KVxuICAgICAgZmFsc2VfY291bnQgPSBmYWxzZV9jb3VudCArIDFcbiAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZWxlbWVudCwgXCJzdWNjZXNzXFxcXFwiOlxcXFxcImRlbmllZFwiKSBhbmQgZGVuaWVkX2NvdW50IDwgbnVtX2VsZW1lbnRzIHRoZW5cbiAgICAgIHRhYmxlLmluc2VydChkZW5pZWRfZ3JvdXAsIHtzY29yZSwgZWxlbWVudH0pXG4gICAgICBkZW5pZWRfY291bnQgPSBkZW5pZWRfY291bnQgKyAxXG4gICAgZW5kXG4gIGVuZFxuICBpID0gaSAtIDJcbmVuZFxuXG5yZXR1cm4ge3RydWVfZ3JvdXAsIGZhbHNlX2dyb3VwLCBkZW5pZWRfZ3JvdXB9XG5gLGg9YFxubG9jYWwgcHJlZml4ID0gS0VZU1sxXVxubG9jYWwgZmlyc3RfdGltZXN0YW1wID0gdG9udW1iZXIoQVJHVlsxXSlcbmxvY2FsIGluY3JlbWVudCA9IHRvbnVtYmVyKEFSR1ZbMl0pXG5sb2NhbCBudW1fdGltZXN0YW1wcyA9IHRvbnVtYmVyKEFSR1ZbM10pXG5cbmxvY2FsIGtleXMgPSB7fVxuZm9yIGkgPSAxLCBudW1fdGltZXN0YW1wcyBkb1xuICBsb2NhbCB0aW1lc3RhbXAgPSBmaXJzdF90aW1lc3RhbXAgLSAoaSAtIDEpICogaW5jcmVtZW50XG4gIHRhYmxlLmluc2VydChrZXlzLCBwcmVmaXggLi4gXCI6XCIgLi4gdGltZXN0YW1wKVxuZW5kXG5cbi0tIGdldCB0aGUgdW5pb24gb2YgdGhlIGdyb3Vwc1xubG9jYWwgenVuaW9uX3BhcmFtcyA9IHtcIlpVTklPTlwiLCBudW1fdGltZXN0YW1wcywgdW5wYWNrKGtleXMpfVxudGFibGUuaW5zZXJ0KHp1bmlvbl9wYXJhbXMsIFwiV0lUSFNDT1JFU1wiKVxubG9jYWwgcmVzdWx0ID0gcmVkaXMuY2FsbCh1bnBhY2soenVuaW9uX3BhcmFtcykpXG5cbnJldHVybiByZXN1bHRcbmA7dmFyIGI9Y2xhc3N7cmVkaXM7cHJlZml4O2J1Y2tldFNpemU7Y29uc3RydWN0b3IoZSl7dGhpcy5yZWRpcz1lLnJlZGlzLHRoaXMucHJlZml4PWUucHJlZml4Pz9cIkB1cHN0YXNoL2FuYWx5dGljc1wiLHRoaXMuYnVja2V0U2l6ZT10aGlzLnBhcnNlV2luZG93KGUud2luZG93KX12YWxpZGF0ZVRhYmxlTmFtZShlKXtpZighL15bYS16QS1aMC05Xy1dKyQvLnRlc3QoZSkpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRhYmxlIG5hbWU6ICR7ZX0uIFRhYmxlIG5hbWVzIGNhbiBvbmx5IGNvbnRhaW4gbGV0dGVycywgbnVtYmVycywgZGFzaGVzIGFuZCB1bmRlcnNjb3Jlcy5gKX1wYXJzZVdpbmRvdyhlKXtpZih0eXBlb2YgZT09XCJudW1iZXJcIil7aWYoZTw9MCl0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgd2luZG93OiAke2V9YCk7cmV0dXJuIGV9bGV0IHQ9L14oXFxkKykoW3NtaGRdKSQvO2lmKCF0LnRlc3QoZSkpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHdpbmRvdzogJHtlfWApO2xldFssaSxzXT1lLm1hdGNoKHQpLG49cGFyc2VJbnQoaSk7c3dpdGNoKHMpe2Nhc2VcInNcIjpyZXR1cm4gbioxZTM7Y2FzZVwibVwiOnJldHVybiBuKjFlMyo2MDtjYXNlXCJoXCI6cmV0dXJuIG4qMWUzKjYwKjYwO2Nhc2VcImRcIjpyZXR1cm4gbioxZTMqNjAqNjAqMjQ7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgd2luZG93IHVuaXQ6ICR7c31gKX19Z2V0QnVja2V0KGUpe2xldCB0PWU/P0RhdGUubm93KCk7cmV0dXJuIE1hdGguZmxvb3IodC90aGlzLmJ1Y2tldFNpemUpKnRoaXMuYnVja2V0U2l6ZX1hc3luYyBpbmdlc3QoZSwuLi50KXt0aGlzLnZhbGlkYXRlVGFibGVOYW1lKGUpLGF3YWl0IFByb21pc2UuYWxsKHQubWFwKGFzeW5jIGk9PntsZXQgcz10aGlzLmdldEJ1Y2tldChpLnRpbWUpLG49W3RoaXMucHJlZml4LGUsc10uam9pbihcIjpcIik7YXdhaXQgdGhpcy5yZWRpcy56aW5jcmJ5KG4sMSxKU09OLnN0cmluZ2lmeSh7Li4uaSx0aW1lOnZvaWQgMH0pKX0pKX1mb3JtYXRCdWNrZXRBZ2dyZWdhdGUoZSx0LGkpe2xldCBzPXt9O3JldHVybiBlLmZvckVhY2goKFtuLHJdKT0+e3Q9PVwic3VjY2Vzc1wiJiYobj1uPT09MT9cInRydWVcIjpuPT09bnVsbD9cImZhbHNlXCI6biksc1t0XT1zW3RdfHx7fSxzW3RdWyhuPz9cIm51bGxcIikudG9TdHJpbmcoKV09cn0pLHt0aW1lOmksLi4uc319YXN5bmMgYWdncmVnYXRlQnVja2V0KGUsdCxpKXt0aGlzLnZhbGlkYXRlVGFibGVOYW1lKGUpO2xldCBzPXRoaXMuZ2V0QnVja2V0KGkpLG49W3RoaXMucHJlZml4LGUsc10uam9pbihcIjpcIikscj1hd2FpdCB0aGlzLnJlZGlzLmV2YWwocCxbbl0sW3RdKTtyZXR1cm4gdGhpcy5mb3JtYXRCdWNrZXRBZ2dyZWdhdGUocix0LHMpfWFzeW5jIGFnZ3JlZ2F0ZUJ1Y2tldHMoZSx0LGkscyl7dGhpcy52YWxpZGF0ZVRhYmxlTmFtZShlKTtsZXQgbj10aGlzLmdldEJ1Y2tldChzKSxyPVtdO2ZvcihsZXQgbz0wO288aTtvKz0xKXIucHVzaCh0aGlzLmFnZ3JlZ2F0ZUJ1Y2tldChlLHQsbikpLG49bi10aGlzLmJ1Y2tldFNpemU7cmV0dXJuIFByb21pc2UuYWxsKHIpfWFzeW5jIGFnZ3JlZ2F0ZUJ1Y2tldHNXaXRoUGlwZWxpbmUoZSx0LGkscyxuKXt0aGlzLnZhbGlkYXRlVGFibGVOYW1lKGUpLG49bj8/NDg7bGV0IHI9dGhpcy5nZXRCdWNrZXQocyksbz1bXSxjPXRoaXMucmVkaXMucGlwZWxpbmUoKSx1PVtdO2ZvcihsZXQgYT0xO2E8PWk7YSs9MSl7bGV0IGQ9W3RoaXMucHJlZml4LGUscl0uam9pbihcIjpcIik7Yy5ldmFsKHAsW2RdLFt0XSksby5wdXNoKHIpLHI9ci10aGlzLmJ1Y2tldFNpemUsKGElbj09MHx8YT09aSkmJih1LnB1c2goYy5leGVjKCkpLGM9dGhpcy5yZWRpcy5waXBlbGluZSgpKX1yZXR1cm4oYXdhaXQgUHJvbWlzZS5hbGwodSkpLmZsYXQoKS5tYXAoKGEsZCk9PnRoaXMuZm9ybWF0QnVja2V0QWdncmVnYXRlKGEsdCxvW2RdKSl9YXN5bmMgZ2V0QWxsb3dlZEJsb2NrZWQoZSx0LGkpe3RoaXMudmFsaWRhdGVUYWJsZU5hbWUoZSk7bGV0IHM9W3RoaXMucHJlZml4LGVdLmpvaW4oXCI6XCIpLG49dGhpcy5nZXRCdWNrZXQoaSkscj1hd2FpdCB0aGlzLnJlZGlzLmV2YWwoaCxbc10sW24sdGhpcy5idWNrZXRTaXplLHRdKSxvPXt9O2ZvcihsZXQgYz0wO2M8ci5sZW5ndGg7Yys9Mil7bGV0IHU9cltjXSxtPXUuaWRlbnRpZmllcixhPStyW2MrMV07b1ttXXx8KG9bbV09e3N1Y2Nlc3M6MCxibG9ja2VkOjB9KSxvW21dW3Uuc3VjY2Vzcz9cInN1Y2Nlc3NcIjpcImJsb2NrZWRcIl09YX1yZXR1cm4gb31hc3luYyBnZXRNb3N0QWxsb3dlZEJsb2NrZWQoZSx0LGkscyxuKXt0aGlzLnZhbGlkYXRlVGFibGVOYW1lKGUpO2xldCByPVt0aGlzLnByZWZpeCxlXS5qb2luKFwiOlwiKSxvPXRoaXMuZ2V0QnVja2V0KHMpLGM9bj8/aSo1LFt1LG0sYV09YXdhaXQgdGhpcy5yZWRpcy5ldmFsKGYsW3JdLFtvLHRoaXMuYnVja2V0U2l6ZSx0LGksY10pO3JldHVybnthbGxvd2VkOnRoaXMudG9EaWN0cyh1KSxyYXRlbGltaXRlZDp0aGlzLnRvRGljdHMobSksZGVuaWVkOnRoaXMudG9EaWN0cyhhKX19dG9EaWN0cyhlKXtsZXQgdD1bXTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krPTEpe2xldCBzPStlW2ldWzBdLG49ZVtpXVsxXTt0LnB1c2goe2lkZW50aWZpZXI6bi5pZGVudGlmaWVyLGNvdW50OnN9KX1yZXR1cm4gdH19OzAmJihtb2R1bGUuZXhwb3J0cz17QW5hbHl0aWNzfSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/.pnpm/@upstash+core-analytics@0.0.10/node_modules/@upstash/core-analytics/dist/index.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@upstash+core-analytics@0.0.10/node_modules/@upstash/core-analytics/dist/index.js":
/*!******************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@upstash+core-analytics@0.0.10/node_modules/@upstash/core-analytics/dist/index.js ***!
  \******************************************************************************************************************/
/***/ ((module) => {

eval("var g=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var w=(l,e)=>{for(var t in e)g(l,t,{get:e[t],enumerable:!0})},A=(l,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of _(e))!y.call(l,s)&&s!==t&&g(l,s,{get:()=>e[s],enumerable:!(i=k(e,s))||i.enumerable});return l};var x=l=>A(g({},\"__esModule\",{value:!0}),l);var S={};w(S,{Analytics:()=>b});module.exports=x(S);var p=`\nlocal key = KEYS[1]\nlocal field = ARGV[1]\n\nlocal data = redis.call(\"ZRANGE\", key, 0, -1, \"WITHSCORES\")\nlocal count = {}\n\nfor i = 1, #data, 2 do\n  local json_str = data[i]\n  local score = tonumber(data[i + 1])\n  local obj = cjson.decode(json_str)\n\n  local fieldValue = obj[field]\n\n  if count[fieldValue] == nil then\n    count[fieldValue] = score\n  else\n    count[fieldValue] = count[fieldValue] + score\n  end\nend\n\nlocal result = {}\nfor k, v in pairs(count) do\n  table.insert(result, {k, v})\nend\n\nreturn result\n`,f=`\nlocal prefix = KEYS[1]\nlocal first_timestamp = tonumber(ARGV[1]) -- First timestamp to check\nlocal increment = tonumber(ARGV[2])       -- Increment between each timestamp\nlocal num_timestamps = tonumber(ARGV[3])  -- Number of timestampts to check (24 for a day and 24 * 7 for a week)\nlocal num_elements = tonumber(ARGV[4])    -- Number of elements to fetch in each category\nlocal check_at_most = tonumber(ARGV[5])   -- Number of elements to check at most.\n\nlocal keys = {}\nfor i = 1, num_timestamps do\n  local timestamp = first_timestamp - (i - 1) * increment\n  table.insert(keys, prefix .. \":\" .. timestamp)\nend\n\n-- get the union of the groups\nlocal zunion_params = {\"ZUNION\", num_timestamps, unpack(keys)}\ntable.insert(zunion_params, \"WITHSCORES\")\nlocal result = redis.call(unpack(zunion_params))\n\n-- select num_elements many items\nlocal true_group = {}\nlocal false_group = {}\nlocal denied_group = {}\nlocal true_count = 0\nlocal false_count = 0\nlocal denied_count = 0\nlocal i = #result - 1\n\n-- index to stop at after going through \"checkAtMost\" many items:\nlocal cutoff_index = #result - 2 * check_at_most\n\n-- iterate over the results\nwhile (true_count + false_count + denied_count) < (num_elements * 3) and 1 <= i and i >= cutoff_index do\n  local score = tonumber(result[i + 1])\n  if score > 0 then\n    local element = result[i]\n    if string.find(element, \"success\\\\\":true\") and true_count < num_elements then\n      table.insert(true_group, {score, element})\n      true_count = true_count + 1\n    elseif string.find(element, \"success\\\\\":false\") and false_count < num_elements then\n      table.insert(false_group, {score, element})\n      false_count = false_count + 1\n    elseif string.find(element, \"success\\\\\":\\\\\"denied\") and denied_count < num_elements then\n      table.insert(denied_group, {score, element})\n      denied_count = denied_count + 1\n    end\n  end\n  i = i - 2\nend\n\nreturn {true_group, false_group, denied_group}\n`,h=`\nlocal prefix = KEYS[1]\nlocal first_timestamp = tonumber(ARGV[1])\nlocal increment = tonumber(ARGV[2])\nlocal num_timestamps = tonumber(ARGV[3])\n\nlocal keys = {}\nfor i = 1, num_timestamps do\n  local timestamp = first_timestamp - (i - 1) * increment\n  table.insert(keys, prefix .. \":\" .. timestamp)\nend\n\n-- get the union of the groups\nlocal zunion_params = {\"ZUNION\", num_timestamps, unpack(keys)}\ntable.insert(zunion_params, \"WITHSCORES\")\nlocal result = redis.call(unpack(zunion_params))\n\nreturn result\n`;var b=class{redis;prefix;bucketSize;constructor(e){this.redis=e.redis,this.prefix=e.prefix??\"@upstash/analytics\",this.bucketSize=this.parseWindow(e.window)}validateTableName(e){if(!/^[a-zA-Z0-9_-]+$/.test(e))throw new Error(`Invalid table name: ${e}. Table names can only contain letters, numbers, dashes and underscores.`)}parseWindow(e){if(typeof e==\"number\"){if(e<=0)throw new Error(`Invalid window: ${e}`);return e}let t=/^(\\d+)([smhd])$/;if(!t.test(e))throw new Error(`Invalid window: ${e}`);let[,i,s]=e.match(t),n=parseInt(i);switch(s){case\"s\":return n*1e3;case\"m\":return n*1e3*60;case\"h\":return n*1e3*60*60;case\"d\":return n*1e3*60*60*24;default:throw new Error(`Invalid window unit: ${s}`)}}getBucket(e){let t=e??Date.now();return Math.floor(t/this.bucketSize)*this.bucketSize}async ingest(e,...t){this.validateTableName(e),await Promise.all(t.map(async i=>{let s=this.getBucket(i.time),n=[this.prefix,e,s].join(\":\");await this.redis.zincrby(n,1,JSON.stringify({...i,time:void 0}))}))}formatBucketAggregate(e,t,i){let s={};return e.forEach(([n,r])=>{t==\"success\"&&(n=n===1?\"true\":n===null?\"false\":n),s[t]=s[t]||{},s[t][(n??\"null\").toString()]=r}),{time:i,...s}}async aggregateBucket(e,t,i){this.validateTableName(e);let s=this.getBucket(i),n=[this.prefix,e,s].join(\":\"),r=await this.redis.eval(p,[n],[t]);return this.formatBucketAggregate(r,t,s)}async aggregateBuckets(e,t,i,s){this.validateTableName(e);let n=this.getBucket(s),r=[];for(let o=0;o<i;o+=1)r.push(this.aggregateBucket(e,t,n)),n=n-this.bucketSize;return Promise.all(r)}async aggregateBucketsWithPipeline(e,t,i,s,n){this.validateTableName(e),n=n??48;let r=this.getBucket(s),o=[],c=this.redis.pipeline(),u=[];for(let a=1;a<=i;a+=1){let d=[this.prefix,e,r].join(\":\");c.eval(p,[d],[t]),o.push(r),r=r-this.bucketSize,(a%n==0||a==i)&&(u.push(c.exec()),c=this.redis.pipeline())}return(await Promise.all(u)).flat().map((a,d)=>this.formatBucketAggregate(a,t,o[d]))}async getAllowedBlocked(e,t,i){this.validateTableName(e);let s=[this.prefix,e].join(\":\"),n=this.getBucket(i),r=await this.redis.eval(h,[s],[n,this.bucketSize,t]),o={};for(let c=0;c<r.length;c+=2){let u=r[c],m=u.identifier,a=+r[c+1];o[m]||(o[m]={success:0,blocked:0}),o[m][u.success?\"success\":\"blocked\"]=a}return o}async getMostAllowedBlocked(e,t,i,s,n){this.validateTableName(e);let r=[this.prefix,e].join(\":\"),o=this.getBucket(s),c=n??i*5,[u,m,a]=await this.redis.eval(f,[r],[o,this.bucketSize,t,i,c]);return{allowed:this.toDicts(u),ratelimited:this.toDicts(m),denied:this.toDicts(a)}}toDicts(e){let t=[];for(let i=0;i<e.length;i+=1){let s=+e[i][0],n=e[i][1];t.push({identifier:n.identifier,count:s})}return t}};0&&(0);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0B1cHN0YXNoK2NvcmUtYW5hbHl0aWNzQDAuMC4xMC9ub2RlX21vZHVsZXMvQHVwc3Rhc2gvY29yZS1hbmFseXRpY3MvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYSw0QkFBNEIsc0NBQXNDLGlDQUFpQyxzQ0FBc0MsY0FBYyxzQkFBc0IsdUJBQXVCLEVBQUUsZUFBZSw2RkFBNkYsa0RBQWtELEVBQUUsVUFBVSxlQUFlLGVBQWUsU0FBUyxLQUFLLFNBQVMsS0FBSyxnQkFBZ0IsRUFBRSxvQkFBb0I7QUFDN2Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLEtBQUs7QUFDN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxlQUFlO0FBQy9DO0FBQ0E7QUFDQSxpQ0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0Esa0NBQWtDLGVBQWU7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQSxFQUFFLFlBQVksTUFBTSxPQUFPLFdBQVcsZUFBZSx5R0FBeUcscUJBQXFCLHNFQUFzRSxFQUFFLDJFQUEyRSxlQUFlLHVCQUF1QiwyQ0FBMkMsRUFBRSxHQUFHLFNBQVMsd0JBQXdCLGlEQUFpRCxFQUFFLEdBQUcsbUNBQW1DLFVBQVUscUJBQXFCLHdCQUF3QiwyQkFBMkIsOEJBQThCLGdEQUFnRCxFQUFFLElBQUksYUFBYSxvQkFBb0IscURBQXFELHFCQUFxQiw0REFBNEQsMkRBQTJELDZDQUE2QyxpQkFBaUIsR0FBRyxHQUFHLDZCQUE2QixTQUFTLDJCQUEyQiwrREFBK0QsZ0NBQWdDLEdBQUcsYUFBYSw2QkFBNkIsMEJBQTBCLHlGQUF5Rix5Q0FBeUMsZ0NBQWdDLDBCQUEwQiw2QkFBNkIsWUFBWSxJQUFJLDZEQUE2RCxzQkFBc0IsOENBQThDLGtDQUFrQywwREFBMEQsWUFBWSxLQUFLLE1BQU0sa0NBQWtDLDJHQUEyRyxxRkFBcUYsK0JBQStCLDBCQUEwQiw4R0FBOEcsWUFBWSxXQUFXLE1BQU0sb0NBQW9DLGFBQWEsb0JBQW9CLHdDQUF3QyxTQUFTLHVDQUF1QywwQkFBMEIsNEhBQTRILE9BQU8sNEVBQTRFLFdBQVcsU0FBUyxZQUFZLFdBQVcsTUFBTSx5QkFBeUIsUUFBUSxnQ0FBZ0MsRUFBRSxXQUFXLElBQUksQ0FBMEIiLCJzb3VyY2VzIjpbIkM6XFxCQVNFXFxERU5JS08tUFJPSkVDVFxcZGVuaWtvXFxub2RlX21vZHVsZXNcXC5wbnBtXFxAdXBzdGFzaCtjb3JlLWFuYWx5dGljc0AwLjAuMTBcXG5vZGVfbW9kdWxlc1xcQHVwc3Rhc2hcXGNvcmUtYW5hbHl0aWNzXFxkaXN0XFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjt2YXIgZz1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIGs9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjt2YXIgXz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lczt2YXIgeT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciB3PShsLGUpPT57Zm9yKHZhciB0IGluIGUpZyhsLHQse2dldDplW3RdLGVudW1lcmFibGU6ITB9KX0sQT0obCxlLHQsaSk9PntpZihlJiZ0eXBlb2YgZT09XCJvYmplY3RcInx8dHlwZW9mIGU9PVwiZnVuY3Rpb25cIilmb3IobGV0IHMgb2YgXyhlKSkheS5jYWxsKGwscykmJnMhPT10JiZnKGwscyx7Z2V0OigpPT5lW3NdLGVudW1lcmFibGU6IShpPWsoZSxzKSl8fGkuZW51bWVyYWJsZX0pO3JldHVybiBsfTt2YXIgeD1sPT5BKGcoe30sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksbCk7dmFyIFM9e307dyhTLHtBbmFseXRpY3M6KCk9PmJ9KTttb2R1bGUuZXhwb3J0cz14KFMpO3ZhciBwPWBcbmxvY2FsIGtleSA9IEtFWVNbMV1cbmxvY2FsIGZpZWxkID0gQVJHVlsxXVxuXG5sb2NhbCBkYXRhID0gcmVkaXMuY2FsbChcIlpSQU5HRVwiLCBrZXksIDAsIC0xLCBcIldJVEhTQ09SRVNcIilcbmxvY2FsIGNvdW50ID0ge31cblxuZm9yIGkgPSAxLCAjZGF0YSwgMiBkb1xuICBsb2NhbCBqc29uX3N0ciA9IGRhdGFbaV1cbiAgbG9jYWwgc2NvcmUgPSB0b251bWJlcihkYXRhW2kgKyAxXSlcbiAgbG9jYWwgb2JqID0gY2pzb24uZGVjb2RlKGpzb25fc3RyKVxuXG4gIGxvY2FsIGZpZWxkVmFsdWUgPSBvYmpbZmllbGRdXG5cbiAgaWYgY291bnRbZmllbGRWYWx1ZV0gPT0gbmlsIHRoZW5cbiAgICBjb3VudFtmaWVsZFZhbHVlXSA9IHNjb3JlXG4gIGVsc2VcbiAgICBjb3VudFtmaWVsZFZhbHVlXSA9IGNvdW50W2ZpZWxkVmFsdWVdICsgc2NvcmVcbiAgZW5kXG5lbmRcblxubG9jYWwgcmVzdWx0ID0ge31cbmZvciBrLCB2IGluIHBhaXJzKGNvdW50KSBkb1xuICB0YWJsZS5pbnNlcnQocmVzdWx0LCB7aywgdn0pXG5lbmRcblxucmV0dXJuIHJlc3VsdFxuYCxmPWBcbmxvY2FsIHByZWZpeCA9IEtFWVNbMV1cbmxvY2FsIGZpcnN0X3RpbWVzdGFtcCA9IHRvbnVtYmVyKEFSR1ZbMV0pIC0tIEZpcnN0IHRpbWVzdGFtcCB0byBjaGVja1xubG9jYWwgaW5jcmVtZW50ID0gdG9udW1iZXIoQVJHVlsyXSkgICAgICAgLS0gSW5jcmVtZW50IGJldHdlZW4gZWFjaCB0aW1lc3RhbXBcbmxvY2FsIG51bV90aW1lc3RhbXBzID0gdG9udW1iZXIoQVJHVlszXSkgIC0tIE51bWJlciBvZiB0aW1lc3RhbXB0cyB0byBjaGVjayAoMjQgZm9yIGEgZGF5IGFuZCAyNCAqIDcgZm9yIGEgd2VlaylcbmxvY2FsIG51bV9lbGVtZW50cyA9IHRvbnVtYmVyKEFSR1ZbNF0pICAgIC0tIE51bWJlciBvZiBlbGVtZW50cyB0byBmZXRjaCBpbiBlYWNoIGNhdGVnb3J5XG5sb2NhbCBjaGVja19hdF9tb3N0ID0gdG9udW1iZXIoQVJHVls1XSkgICAtLSBOdW1iZXIgb2YgZWxlbWVudHMgdG8gY2hlY2sgYXQgbW9zdC5cblxubG9jYWwga2V5cyA9IHt9XG5mb3IgaSA9IDEsIG51bV90aW1lc3RhbXBzIGRvXG4gIGxvY2FsIHRpbWVzdGFtcCA9IGZpcnN0X3RpbWVzdGFtcCAtIChpIC0gMSkgKiBpbmNyZW1lbnRcbiAgdGFibGUuaW5zZXJ0KGtleXMsIHByZWZpeCAuLiBcIjpcIiAuLiB0aW1lc3RhbXApXG5lbmRcblxuLS0gZ2V0IHRoZSB1bmlvbiBvZiB0aGUgZ3JvdXBzXG5sb2NhbCB6dW5pb25fcGFyYW1zID0ge1wiWlVOSU9OXCIsIG51bV90aW1lc3RhbXBzLCB1bnBhY2soa2V5cyl9XG50YWJsZS5pbnNlcnQoenVuaW9uX3BhcmFtcywgXCJXSVRIU0NPUkVTXCIpXG5sb2NhbCByZXN1bHQgPSByZWRpcy5jYWxsKHVucGFjayh6dW5pb25fcGFyYW1zKSlcblxuLS0gc2VsZWN0IG51bV9lbGVtZW50cyBtYW55IGl0ZW1zXG5sb2NhbCB0cnVlX2dyb3VwID0ge31cbmxvY2FsIGZhbHNlX2dyb3VwID0ge31cbmxvY2FsIGRlbmllZF9ncm91cCA9IHt9XG5sb2NhbCB0cnVlX2NvdW50ID0gMFxubG9jYWwgZmFsc2VfY291bnQgPSAwXG5sb2NhbCBkZW5pZWRfY291bnQgPSAwXG5sb2NhbCBpID0gI3Jlc3VsdCAtIDFcblxuLS0gaW5kZXggdG8gc3RvcCBhdCBhZnRlciBnb2luZyB0aHJvdWdoIFwiY2hlY2tBdE1vc3RcIiBtYW55IGl0ZW1zOlxubG9jYWwgY3V0b2ZmX2luZGV4ID0gI3Jlc3VsdCAtIDIgKiBjaGVja19hdF9tb3N0XG5cbi0tIGl0ZXJhdGUgb3ZlciB0aGUgcmVzdWx0c1xud2hpbGUgKHRydWVfY291bnQgKyBmYWxzZV9jb3VudCArIGRlbmllZF9jb3VudCkgPCAobnVtX2VsZW1lbnRzICogMykgYW5kIDEgPD0gaSBhbmQgaSA+PSBjdXRvZmZfaW5kZXggZG9cbiAgbG9jYWwgc2NvcmUgPSB0b251bWJlcihyZXN1bHRbaSArIDFdKVxuICBpZiBzY29yZSA+IDAgdGhlblxuICAgIGxvY2FsIGVsZW1lbnQgPSByZXN1bHRbaV1cbiAgICBpZiBzdHJpbmcuZmluZChlbGVtZW50LCBcInN1Y2Nlc3NcXFxcXCI6dHJ1ZVwiKSBhbmQgdHJ1ZV9jb3VudCA8IG51bV9lbGVtZW50cyB0aGVuXG4gICAgICB0YWJsZS5pbnNlcnQodHJ1ZV9ncm91cCwge3Njb3JlLCBlbGVtZW50fSlcbiAgICAgIHRydWVfY291bnQgPSB0cnVlX2NvdW50ICsgMVxuICAgIGVsc2VpZiBzdHJpbmcuZmluZChlbGVtZW50LCBcInN1Y2Nlc3NcXFxcXCI6ZmFsc2VcIikgYW5kIGZhbHNlX2NvdW50IDwgbnVtX2VsZW1lbnRzIHRoZW5cbiAgICAgIHRhYmxlLmluc2VydChmYWxzZV9ncm91cCwge3Njb3JlLCBlbGVtZW50fSlcbiAgICAgIGZhbHNlX2NvdW50ID0gZmFsc2VfY291bnQgKyAxXG4gICAgZWxzZWlmIHN0cmluZy5maW5kKGVsZW1lbnQsIFwic3VjY2Vzc1xcXFxcIjpcXFxcXCJkZW5pZWRcIikgYW5kIGRlbmllZF9jb3VudCA8IG51bV9lbGVtZW50cyB0aGVuXG4gICAgICB0YWJsZS5pbnNlcnQoZGVuaWVkX2dyb3VwLCB7c2NvcmUsIGVsZW1lbnR9KVxuICAgICAgZGVuaWVkX2NvdW50ID0gZGVuaWVkX2NvdW50ICsgMVxuICAgIGVuZFxuICBlbmRcbiAgaSA9IGkgLSAyXG5lbmRcblxucmV0dXJuIHt0cnVlX2dyb3VwLCBmYWxzZV9ncm91cCwgZGVuaWVkX2dyb3VwfVxuYCxoPWBcbmxvY2FsIHByZWZpeCA9IEtFWVNbMV1cbmxvY2FsIGZpcnN0X3RpbWVzdGFtcCA9IHRvbnVtYmVyKEFSR1ZbMV0pXG5sb2NhbCBpbmNyZW1lbnQgPSB0b251bWJlcihBUkdWWzJdKVxubG9jYWwgbnVtX3RpbWVzdGFtcHMgPSB0b251bWJlcihBUkdWWzNdKVxuXG5sb2NhbCBrZXlzID0ge31cbmZvciBpID0gMSwgbnVtX3RpbWVzdGFtcHMgZG9cbiAgbG9jYWwgdGltZXN0YW1wID0gZmlyc3RfdGltZXN0YW1wIC0gKGkgLSAxKSAqIGluY3JlbWVudFxuICB0YWJsZS5pbnNlcnQoa2V5cywgcHJlZml4IC4uIFwiOlwiIC4uIHRpbWVzdGFtcClcbmVuZFxuXG4tLSBnZXQgdGhlIHVuaW9uIG9mIHRoZSBncm91cHNcbmxvY2FsIHp1bmlvbl9wYXJhbXMgPSB7XCJaVU5JT05cIiwgbnVtX3RpbWVzdGFtcHMsIHVucGFjayhrZXlzKX1cbnRhYmxlLmluc2VydCh6dW5pb25fcGFyYW1zLCBcIldJVEhTQ09SRVNcIilcbmxvY2FsIHJlc3VsdCA9IHJlZGlzLmNhbGwodW5wYWNrKHp1bmlvbl9wYXJhbXMpKVxuXG5yZXR1cm4gcmVzdWx0XG5gO3ZhciBiPWNsYXNze3JlZGlzO3ByZWZpeDtidWNrZXRTaXplO2NvbnN0cnVjdG9yKGUpe3RoaXMucmVkaXM9ZS5yZWRpcyx0aGlzLnByZWZpeD1lLnByZWZpeD8/XCJAdXBzdGFzaC9hbmFseXRpY3NcIix0aGlzLmJ1Y2tldFNpemU9dGhpcy5wYXJzZVdpbmRvdyhlLndpbmRvdyl9dmFsaWRhdGVUYWJsZU5hbWUoZSl7aWYoIS9eW2EtekEtWjAtOV8tXSskLy50ZXN0KGUpKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0YWJsZSBuYW1lOiAke2V9LiBUYWJsZSBuYW1lcyBjYW4gb25seSBjb250YWluIGxldHRlcnMsIG51bWJlcnMsIGRhc2hlcyBhbmQgdW5kZXJzY29yZXMuYCl9cGFyc2VXaW5kb3coZSl7aWYodHlwZW9mIGU9PVwibnVtYmVyXCIpe2lmKGU8PTApdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHdpbmRvdzogJHtlfWApO3JldHVybiBlfWxldCB0PS9eKFxcZCspKFtzbWhkXSkkLztpZighdC50ZXN0KGUpKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCB3aW5kb3c6ICR7ZX1gKTtsZXRbLGksc109ZS5tYXRjaCh0KSxuPXBhcnNlSW50KGkpO3N3aXRjaChzKXtjYXNlXCJzXCI6cmV0dXJuIG4qMWUzO2Nhc2VcIm1cIjpyZXR1cm4gbioxZTMqNjA7Y2FzZVwiaFwiOnJldHVybiBuKjFlMyo2MCo2MDtjYXNlXCJkXCI6cmV0dXJuIG4qMWUzKjYwKjYwKjI0O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHdpbmRvdyB1bml0OiAke3N9YCl9fWdldEJ1Y2tldChlKXtsZXQgdD1lPz9EYXRlLm5vdygpO3JldHVybiBNYXRoLmZsb29yKHQvdGhpcy5idWNrZXRTaXplKSp0aGlzLmJ1Y2tldFNpemV9YXN5bmMgaW5nZXN0KGUsLi4udCl7dGhpcy52YWxpZGF0ZVRhYmxlTmFtZShlKSxhd2FpdCBQcm9taXNlLmFsbCh0Lm1hcChhc3luYyBpPT57bGV0IHM9dGhpcy5nZXRCdWNrZXQoaS50aW1lKSxuPVt0aGlzLnByZWZpeCxlLHNdLmpvaW4oXCI6XCIpO2F3YWl0IHRoaXMucmVkaXMuemluY3JieShuLDEsSlNPTi5zdHJpbmdpZnkoey4uLmksdGltZTp2b2lkIDB9KSl9KSl9Zm9ybWF0QnVja2V0QWdncmVnYXRlKGUsdCxpKXtsZXQgcz17fTtyZXR1cm4gZS5mb3JFYWNoKChbbixyXSk9Pnt0PT1cInN1Y2Nlc3NcIiYmKG49bj09PTE/XCJ0cnVlXCI6bj09PW51bGw/XCJmYWxzZVwiOm4pLHNbdF09c1t0XXx8e30sc1t0XVsobj8/XCJudWxsXCIpLnRvU3RyaW5nKCldPXJ9KSx7dGltZTppLC4uLnN9fWFzeW5jIGFnZ3JlZ2F0ZUJ1Y2tldChlLHQsaSl7dGhpcy52YWxpZGF0ZVRhYmxlTmFtZShlKTtsZXQgcz10aGlzLmdldEJ1Y2tldChpKSxuPVt0aGlzLnByZWZpeCxlLHNdLmpvaW4oXCI6XCIpLHI9YXdhaXQgdGhpcy5yZWRpcy5ldmFsKHAsW25dLFt0XSk7cmV0dXJuIHRoaXMuZm9ybWF0QnVja2V0QWdncmVnYXRlKHIsdCxzKX1hc3luYyBhZ2dyZWdhdGVCdWNrZXRzKGUsdCxpLHMpe3RoaXMudmFsaWRhdGVUYWJsZU5hbWUoZSk7bGV0IG49dGhpcy5nZXRCdWNrZXQocykscj1bXTtmb3IobGV0IG89MDtvPGk7bys9MSlyLnB1c2godGhpcy5hZ2dyZWdhdGVCdWNrZXQoZSx0LG4pKSxuPW4tdGhpcy5idWNrZXRTaXplO3JldHVybiBQcm9taXNlLmFsbChyKX1hc3luYyBhZ2dyZWdhdGVCdWNrZXRzV2l0aFBpcGVsaW5lKGUsdCxpLHMsbil7dGhpcy52YWxpZGF0ZVRhYmxlTmFtZShlKSxuPW4/PzQ4O2xldCByPXRoaXMuZ2V0QnVja2V0KHMpLG89W10sYz10aGlzLnJlZGlzLnBpcGVsaW5lKCksdT1bXTtmb3IobGV0IGE9MTthPD1pO2ErPTEpe2xldCBkPVt0aGlzLnByZWZpeCxlLHJdLmpvaW4oXCI6XCIpO2MuZXZhbChwLFtkXSxbdF0pLG8ucHVzaChyKSxyPXItdGhpcy5idWNrZXRTaXplLChhJW49PTB8fGE9PWkpJiYodS5wdXNoKGMuZXhlYygpKSxjPXRoaXMucmVkaXMucGlwZWxpbmUoKSl9cmV0dXJuKGF3YWl0IFByb21pc2UuYWxsKHUpKS5mbGF0KCkubWFwKChhLGQpPT50aGlzLmZvcm1hdEJ1Y2tldEFnZ3JlZ2F0ZShhLHQsb1tkXSkpfWFzeW5jIGdldEFsbG93ZWRCbG9ja2VkKGUsdCxpKXt0aGlzLnZhbGlkYXRlVGFibGVOYW1lKGUpO2xldCBzPVt0aGlzLnByZWZpeCxlXS5qb2luKFwiOlwiKSxuPXRoaXMuZ2V0QnVja2V0KGkpLHI9YXdhaXQgdGhpcy5yZWRpcy5ldmFsKGgsW3NdLFtuLHRoaXMuYnVja2V0U2l6ZSx0XSksbz17fTtmb3IobGV0IGM9MDtjPHIubGVuZ3RoO2MrPTIpe2xldCB1PXJbY10sbT11LmlkZW50aWZpZXIsYT0rcltjKzFdO29bbV18fChvW21dPXtzdWNjZXNzOjAsYmxvY2tlZDowfSksb1ttXVt1LnN1Y2Nlc3M/XCJzdWNjZXNzXCI6XCJibG9ja2VkXCJdPWF9cmV0dXJuIG99YXN5bmMgZ2V0TW9zdEFsbG93ZWRCbG9ja2VkKGUsdCxpLHMsbil7dGhpcy52YWxpZGF0ZVRhYmxlTmFtZShlKTtsZXQgcj1bdGhpcy5wcmVmaXgsZV0uam9pbihcIjpcIiksbz10aGlzLmdldEJ1Y2tldChzKSxjPW4/P2kqNSxbdSxtLGFdPWF3YWl0IHRoaXMucmVkaXMuZXZhbChmLFtyXSxbbyx0aGlzLmJ1Y2tldFNpemUsdCxpLGNdKTtyZXR1cm57YWxsb3dlZDp0aGlzLnRvRGljdHModSkscmF0ZWxpbWl0ZWQ6dGhpcy50b0RpY3RzKG0pLGRlbmllZDp0aGlzLnRvRGljdHMoYSl9fXRvRGljdHMoZSl7bGV0IHQ9W107Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKz0xKXtsZXQgcz0rZVtpXVswXSxuPWVbaV1bMV07dC5wdXNoKHtpZGVudGlmaWVyOm4uaWRlbnRpZmllcixjb3VudDpzfSl9cmV0dXJuIHR9fTswJiYobW9kdWxlLmV4cG9ydHM9e0FuYWx5dGljc30pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@upstash+core-analytics@0.0.10/node_modules/@upstash/core-analytics/dist/index.js\n");

/***/ })

};
;